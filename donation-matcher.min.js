const employerList=["Adobe","AMD","Applied Materials","Broadcom","ByteDance","Cadence","Cisco","Cloudera","Coupa Software","Dell","Esurance","Etsy","HPI","IBM","Intel","Juniper","Lam Research","LexisNexis","LinkedIn","McAfee","Microsoft","NetApp","Oracle","Palo Alto Networks","PayPal","Pfizer","PlayStation Cares","Qualcomm","Roblox","Samsung","SAP","Splunk","Symantec","UHG","Unum","Veritas","VISA","Wells Fargo","Yahoo","Genworth financial","Morgan stanley","Cloudera"],donationForms={"goshala-project":{label:"Goshala Project - Square-Foot Seva Sponsorships",img:"https://www.kbgoshala.org/wp-content/uploads/2017/11/Screenshot-2024-06-17-at-8.04.18%E2%80%AFPM-2048x1324.png",vpf:"https://secure.kbmandir.org/forms/goshala-project-vpf",ihf:"https://secure.kbmandir.org/forms/goshala-project-ihf",bgColor:"#87CEEB",icon:"üêÑ"},"sastra-seva":{label:"Gita Dana - Seva Sponsorships",img:"https://secure.kbmandir.org/neon/resource/ihf/images/gita_jayanti_donate.jpg",vpf:"https://secure.kbmandir.org/forms/book-distribution-vpf",ihf:"https://secure.kbmandir.org/forms/book-distribution-ihf",bgColor:"#FFB347",icon:"üìñ"},"new-temple-project":{label:"New Temple Project - Seva Sponsorships",img:"https://www.kbmandir.org/wp-content/uploads/2017/11/nvw-scaled.jpg",vpf:"https://secure.kbmandir.org/forms/new-temple-project-donations-vpf",ihf:"https://secure.kbmandir.org/forms/new-temple-project-donations-ihf",bgColor:"#B19CD9",icon:"üõï"},"sunday-feast":{label:"Sunday Feast Sponsorship",img:"https://secure.kbmandir.org/neon/resource/ihf/images/sunday_feast.JPG",vpf:"https://secure.kbmandir.org/forms/sunday-feast-sponsorship-vpf",ihf:"https://secure.kbmandir.org/forms/sunday-feast-sponsorship-ihf",bgColor:"#FFD1A4",icon:"üçõ"},"sri-lakshmi-narasimha-homa":{label:"Sri Lakshmi Narasimha Homa Sponsorship",img:"https://secure.kbmandir.org/neon/resource/ihf/images/narsimha_homa.jpg",vpf:"https://secure.kbmandir.org/forms/sri-lakshmi-narasimha-homa-vpf",ihf:"https://secure.kbmandir.org/forms/sri-lakshmi-narasimha-homa-ihf",bgColor:"#FF6B6B",icon:"üî•"},"garland-seva":{label:"Deity Garlands - Seva Sponsorships",img:"https://secure.kbmandir.org/neon/resource/ihf/images/garland_seva.JPG",vpf:"https://secure.kbmandir.org/forms/garland-sevas-vpf",ihf:"https://secure.kbmandir.org/forms/garland-sevas-ihf",bgColor:"#FFB6D9",icon:"üå∫"},"nitya-prasada-seva":{label:"Nitya Prasada Seva Sponsorships",img:"https://secure.kbmandir.org/neon/resource/ihf/images/_J1A2922.JPG",vpf:"https://secure.kbmandir.org/forms/nitya-prasada-seva-sponsorships-vpf",ihf:"https://secure.kbmandir.org/forms/nitya-prasada-seva-sponsorships-ihf",bgColor:"#F7DC6F",icon:"ü•ò"},"deity-seva":{label:"Daily Deity Seva Sponsorships",img:"https://www.kbmandir.org/wp-content/uploads/2022/03/2022_14.jpg",vpf:"https://secure.kbmandir.org/forms/deity-sevas-vpf",ihf:"https://secure.kbmandir.org/forms/deity-sevas-ihf",bgColor:"#A8E6CF",icon:"üôè"},"cow-feeding-seva":{label:"Goshala - Cow Feeding Seva Sponsorships",img:"https://secure.kbmandir.org/neon/resource/ihf/images/WhatsApp%20Image%202025-01-25%20at%2018_32_50.jpeg",vpf:"https://secure.kbmandir.org/forms/cow-feeding-seva-vpf",ihf:"https://secure.kbmandir.org/forms/cow-feeding-seva-ihf",bgColor:"#98D8C8",icon:"üêÑ"},gopuja:{label:"Gopuja - Seva Sponsorships",img:"https://www.kbgoshala.org/wp-content/uploads/2017/11/km.jpg",vpf:"https://secure.kbmandir.org/forms/gopuja-vpf",ihf:"https://secure.kbmandir.org/forms/gopuja-ihf",bgColor:"#FFD700",icon:"üêÑ"},"general-donation":{label:"General Donations",img:"https://secure.kbmandir.org/neon/resource/ihf/images/general_donations.jpeg",vpf:"https://secure.kbmandir.org/forms/general-donation-vpf",ihf:"https://secure.kbmandir.org/forms/general-donation-ihf",bgColor:"#F4A460",icon:"üíù"}};function setEmployerCookie(e){const t=encodeURIComponent(e),o="max-age=31536000",n="path=/";document.cookie=`ihf_employer_name=${t}; ${n}; domain=.kbmandir.org; ${o}`,document.cookie=`ihf_employer_name=${t}; ${n}; domain=.kbgoshala.org; ${o}`,document.cookie=`ihf_employer_name=${t}; ${n}; ${o}`}function getEmployerCookie(){const e=document.cookie.match(/(?:^|; )ihf_employer_name=([^;]*)/);return e?decodeURIComponent(e[1]):null}function toggleInstructions(e){const t=document.getElementById("instructionsText");t&&(e&&e.trim()?t.style.display="none":t.style.display="block")}function disableFormClicks(){const e=document.getElementById("heroTile"),t=document.getElementById("donationTiles");e&&(e.style.pointerEvents="none",e.style.opacity="0.5"),t&&(t.style.pointerEvents="none",t.style.opacity="0.5")}function enableFormClicks(){const e=document.getElementById("heroTile"),t=document.getElementById("donationTiles");e&&(e.style.pointerEvents="auto",e.style.opacity="1"),t&&(t.style.pointerEvents="auto",t.style.opacity="1")}function updateEmployerDisplay(e,t=!1){const o=document.querySelector(".employer-info"),n=(document.getElementById("employerName"),e.replace(/\bNA\b/,'<span style="color: #007BFF; font-weight: bold;">NA</span>'));o.innerHTML=t?`<strong id="employerName">${n}</strong>\n            <span id="editLink" class="edit-link" onclick="toggleEditMode()" style="display: none;">Edit</span>`:`Your Employer: <strong id="employerName">${e}</strong>\n            <span id="editLink" class="edit-link" onclick="toggleEditMode()" style="display: none;">Edit</span>`}function updateProgressSteps(e){document.querySelectorAll(".step").forEach((t,o)=>{o<e?(t.classList.add("completed"),t.classList.remove("active")):o===e?(t.classList.add("active"),t.classList.remove("completed")):t.classList.remove("active","completed")})}function toggleEditMode(){const e=document.getElementById("inputGroup"),t=document.getElementById("editLink"),o=document.querySelector(".steps-container"),n=document.getElementById("formInstruction");e.style.display="flex",t.style.display="none",n&&(n.style.display="none"),o&&(o.style.display="flex"),document.getElementById("employerInput").focus()}function updateEmployer(){const e=document.getElementById("employerInput").value.trim();if(e){setEmployerCookie(e),localStorage.setItem("ihf_employer_name",e),updateEmployerDisplay(e,!1);const t=document.querySelector(".steps-container"),o=document.getElementById("inputGroup"),n=document.getElementById("editLink"),s=document.getElementById("formInstruction");t&&(t.style.display="none"),o&&(o.style.display="none"),n&&(n.style.display="inline"),s&&(s.style.display="block");renderTiles(employerList.some(t=>e.toLowerCase().includes(t.toLowerCase()))?"vpf":"ihf"),enableFormClicks()}else{setEmployerCookie(""),localStorage.removeItem("ihf_employer_name"),updateEmployerDisplay("Please enter your Employer name. Enter NA if not applicable.",!0);const e=document.querySelector(".steps-container"),t=document.getElementById("inputGroup"),o=document.getElementById("editLink"),n=document.getElementById("formInstruction");e&&(e.style.display="flex"),t&&(t.style.display="flex"),o&&(o.style.display="none"),n&&(n.style.display="none"),updateProgressSteps(0),disableFormClicks();const s=document.getElementById("heroTile"),a=document.getElementById("donationTiles");s&&(s.innerHTML=""),a&&(a.innerHTML="")}toggleInstructions(e)}function renderTiles(e){const t=document.getElementById("heroTile"),o=document.getElementById("donationTiles");t&&(t.innerHTML=""),o&&(o.innerHTML="");const n=new URLSearchParams(window.location.search),s=n.get("opportunity")||n.get("form");n.delete("form"),n.delete("opportunity");const a=n.toString()?`?${n.toString()}`:"",r=Object.entries(donationForms);if(s){const e=r.slice();r.sort((t,o)=>{if(t[0]===s)return-1;if(o[0]===s)return 1;return e.findIndex(([e])=>e===t[0])-e.findIndex(([e])=>e===o[0])})}if(r.length>0&&t){const[,o]=r[0],n=document.createElement("a");n.href=o[e]+a,n.target="_blank",n.className="hero";const s=document.createElement("div");s.className="image-placeholder hero-placeholder",s.style.backgroundColor=o.bgColor||"#e0e0e0";const i=o.icon||"üôè";s.innerHTML=`<div class="placeholder-content"><div class="placeholder-icon">${i}</div><div class="placeholder-text">Click here to donate for<br><strong>${o.label}</strong></div></div>`;const l=document.createElement("img");l.src=o.img,l.alt=o.label,l.loading="lazy",l.style.opacity="0",l.style.transition="opacity 0.3s ease-in",l.onload=function(){l.style.opacity="1",s.style.opacity="0",setTimeout(()=>s.remove(),300)};const d=document.createElement("span");d.textContent=o.label,n.appendChild(s),n.appendChild(l),n.appendChild(d),t.appendChild(n)}r.slice(t?1:0).forEach(([,t])=>{const n=document.createElement("a");n.href=t[e]+a,n.target="_blank",n.className="tile";const s=document.createElement("div");s.className="image-placeholder",s.style.backgroundColor=t.bgColor||"#e0e0e0";const r=t.icon||"üôè";s.innerHTML=`<div class="placeholder-content"><div class="placeholder-icon">${r}</div><div class="placeholder-text">Click to donate for<br><strong>${t.label}</strong></div></div>`;const i=document.createElement("img");i.src=t.img,i.alt=t.label,i.loading="lazy",i.style.opacity="0",i.style.transition="opacity 0.3s ease-in",i.onload=function(){i.style.opacity="1",s.style.opacity="0",setTimeout(()=>s.remove(),300)};const l=document.createElement("span");l.textContent=t.label,n.appendChild(s),n.appendChild(i),n.appendChild(l),o&&o.appendChild(n)})}document.getElementById("employerInput").addEventListener("keydown",function(e){"Enter"===e.key&&updateEmployer()});let prefetchedImages=new Set,prefetchedUrls=new Set;function prefetchAllDonationImages(){const e=Object.entries(donationForms);if(Object.values(donationForms).forEach(e=>{if(!prefetchedImages.has(e.img)){(new Image).src=e.img;const t=document.createElement("link");t.rel="prefetch",t.as="image",t.href=e.img,document.head.appendChild(t),prefetchedImages.add(e.img)}}),e.length>0){const[,t]=e[0];["vpf","ihf"].forEach(e=>{const o=t[e];if(o&&!prefetchedUrls.has(o)){const e=document.createElement("link");e.rel="prefetch",e.href=o,document.head.appendChild(e),prefetchedUrls.add(o)}})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",prefetchAllDonationImages):prefetchAllDonationImages(),document.getElementById("employerInput").addEventListener("input",function(e){const t=e.target.value.trim();if(t)updateEmployerDisplay(t,!1);else{updateEmployerDisplay("Please enter your Employer name. Enter NA if not applicable.",!0);const e=document.querySelector(".steps-container"),t=document.getElementById("inputGroup"),o=document.getElementById("editLink"),n=document.getElementById("formInstruction");e&&(e.style.display="flex"),t&&(t.style.display="flex"),o&&(o.style.display="none"),n&&(n.style.display="none"),updateProgressSteps(0),disableFormClicks(),setEmployerCookie(""),localStorage.removeItem("ihf_employer_name");const s=document.getElementById("heroTile"),a=document.getElementById("donationTiles");s&&(s.innerHTML=""),a&&(a.innerHTML="")}toggleInstructions(t)});let storedName=getEmployerCookie()||localStorage.getItem("ihf_employer_name")||"";const employerInput=document.getElementById("employerInput"),employerNameElement=document.getElementById("employerName");if(storedName&&storedName.trim()){updateEmployerDisplay(storedName,!1),employerInput.value=storedName;const e=document.querySelector(".steps-container"),t=document.getElementById("inputGroup"),o=document.getElementById("editLink"),n=document.getElementById("formInstruction");e&&(e.style.display="none"),t&&(t.style.display="none"),o&&(o.style.display="inline"),n&&(n.style.display="block");renderTiles(employerList.some(e=>storedName.toLowerCase().includes(e.toLowerCase()))?"vpf":"ihf"),enableFormClicks()}else{updateEmployerDisplay("Please enter your Employer name. Enter NA if not applicable.",!0),employerInput.value="";const e=document.querySelector(".steps-container"),t=document.getElementById("inputGroup"),o=document.getElementById("editLink"),n=document.getElementById("formInstruction");e&&(e.style.display="flex"),t&&(t.style.display="flex"),o&&(o.style.display="none"),n&&(n.style.display="none"),updateProgressSteps(0),disableFormClicks()}toggleInstructions(storedName),inputGroup&&"none"!==inputGroup.style.display&&setTimeout(function(){employerInput.focus(),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)&&employerInput.click()},100);