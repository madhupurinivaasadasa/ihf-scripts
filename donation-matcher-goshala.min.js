const employerList=["Adobe","Applied Materials","Broadcom","Cadence","Cisco","Dell","Ebay","Esurance","Intel","Juniper","McAfee","Microsoft","NetApp","Oracle","Paypal","Qualcomm","Samsung","ServiceNow","Splunk","Symantec","Veritas","Visa","VMware","Yahoo"],donationForms={"goshala-project":{label:"Goshala Project- Seva Sponsorships",img:"https://www.kbgoshala.org/wp-content/uploads/2017/11/Screenshot-2024-06-17-at-8.04.18%E2%80%AFPM-2048x1324.png",vpf:"https://secure.kbmandir.org/forms/goshala-project-vpf",ihf:"https://secure.kbmandir.org/forms/goshala-project-ihf"},"cow-feeding-seva":{label:"Cow Feeding Seva Sponsorships",img:"https://secure.kbmandir.org/neon/resource/ihf/images/WhatsApp%20Image%202025-01-25%20at%2018_32_50.jpeg",vpf:"https://secure.kbmandir.org/forms/cow-feeding-seva-vpf",ihf:"https://secure.kbmandir.org/forms/cow-feeding-seva-ihf"},"sastra-seva":{label:"Sastra Dana - Seva Sponsorships",img:"https://secure.kbmandir.org/neon/resource/ihf/images/book_distribution.jpeg",vpf:"https://secure.kbmandir.org/forms/book-distribution-vpf",ihf:"https://secure.kbmandir.org/forms/book-distribution-ihf"},"general-donation":{label:"KBMandir General Donation Opportunity",img:"https://secure.kbmandir.org/neon/resource/ihf/images/general_donations.jpeg",vpf:"https://secure.kbmandir.org/forms/general-donation-vpf",ihf:"https://secure.kbmandir.org/forms/general-donation-ihf"}};function setEmployerCookie(e){document.cookie=`ihf_employer_name=${encodeURIComponent(e)}; path=/; domain=.kbmandir.org; max-age=31536000`}function getEmployerCookie(){const e=document.cookie.match(/(?:^|; )ihf_employer_name=([^;]*)/);return e?decodeURIComponent(e[1]):null}function toggleInstructions(e){const t=document.getElementById("instructionsText");t&&(e&&e.trim()?t.style.display="none":t.style.display="block")}function disableFormClicks(){const e=document.getElementById("heroTile"),t=document.getElementById("donationTiles");e&&(e.style.pointerEvents="none",e.style.opacity="0.5"),t&&(t.style.pointerEvents="none",t.style.opacity="0.5")}function enableFormClicks(){const e=document.getElementById("heroTile"),t=document.getElementById("donationTiles");e&&(e.style.pointerEvents="auto",e.style.opacity="1"),t&&(t.style.pointerEvents="auto",t.style.opacity="1")}function updateEmployerDisplay(e,t=!1){const n=document.querySelector(".employer-info");document.getElementById("employerName");n.innerHTML=t?`<strong id="employerName">${e}</strong>\n            <span id="editLink" class="edit-link" onclick="toggleEditMode()" style="display: none;">Edit</span>`:`Your Employer: <strong id="employerName">${e}</strong>\n            <span id="editLink" class="edit-link" onclick="toggleEditMode()" style="display: none;">Edit</span>`}function updateProgressSteps(e){document.querySelectorAll(".step").forEach((t,n)=>{n<e?(t.classList.add("completed"),t.classList.remove("active")):n===e?(t.classList.add("active"),t.classList.remove("completed")):t.classList.remove("active","completed")})}function toggleEditMode(){const e=document.getElementById("inputGroup"),t=document.getElementById("editLink"),n=document.querySelector(".steps-container"),o=document.getElementById("formInstruction");e.style.display="flex",t.style.display="none",o&&(o.style.display="none"),n&&(n.style.display="flex"),document.getElementById("employerInput").focus()}function updateEmployer(){const e=document.getElementById("employerInput").value.trim();if(e){setEmployerCookie(e),localStorage.setItem("ihf_employer_name",e),updateEmployerDisplay(e,!1);const t=document.querySelector(".steps-container"),n=document.getElementById("inputGroup"),o=document.getElementById("editLink"),s=document.getElementById("formInstruction");t&&(t.style.display="none"),n&&(n.style.display="none"),o&&(o.style.display="inline"),s&&(s.style.display="block");renderTiles(employerList.some(t=>e.toLowerCase().includes(t.toLowerCase()))?"vpf":"ihf"),enableFormClicks()}else{setEmployerCookie(""),localStorage.removeItem("ihf_employer_name"),updateEmployerDisplay("Please enter your Employer name. Enter NA if not applicable.",!0);const e=document.querySelector(".steps-container"),t=document.getElementById("inputGroup"),n=document.getElementById("editLink"),o=document.getElementById("formInstruction");e&&(e.style.display="flex"),t&&(t.style.display="flex"),n&&(n.style.display="none"),o&&(o.style.display="none"),updateProgressSteps(0),disableFormClicks();const s=document.getElementById("heroTile"),l=document.getElementById("donationTiles");s&&(s.innerHTML=""),l&&(l.innerHTML="")}toggleInstructions(e)}function renderTiles(e){const t=document.getElementById("heroTile"),n=document.getElementById("donationTiles");t&&(t.innerHTML=""),n&&(n.innerHTML="");const o=new URLSearchParams(window.location.search),s=o.get("opportunity")||o.get("form");o.delete("form"),o.delete("opportunity");const l=o.toString()?`?${o.toString()}`:"",i=Object.entries(donationForms);if(s){const e=i.slice();i.sort((t,n)=>{if(t[0]===s)return-1;if(n[0]===s)return 1;return e.findIndex(([e])=>e===t[0])-e.findIndex(([e])=>e===n[0])})}if(i.length>0&&t){const[,n]=i[0],o=document.createElement("a");o.href=n[e]+l,o.target="_blank",o.className="hero",o.innerHTML=`\n      <img src="${n.img}" alt="${n.label}" />\n      <span>${n.label}</span>\n    `,t.appendChild(o)}i.slice(t?1:0).forEach(([,t])=>{const o=document.createElement("a");o.href=t[e]+l,o.target="_blank",o.className="tile",o.innerHTML=`\n      <img src="${t.img}" alt="${t.label}" />\n      <span>${t.label}</span>\n    `,n&&n.appendChild(o)})}document.getElementById("employerInput").addEventListener("keydown",function(e){"Enter"===e.key&&updateEmployer()}),document.getElementById("employerInput").addEventListener("input",function(e){const t=e.target.value.trim();if(t)updateEmployerDisplay(t,!1);else{updateEmployerDisplay("Please enter your Employer name. Enter NA if not applicable.",!0);const e=document.querySelector(".steps-container"),t=document.getElementById("inputGroup"),n=document.getElementById("editLink"),o=document.getElementById("formInstruction");e&&(e.style.display="flex"),t&&(t.style.display="flex"),n&&(n.style.display="none"),o&&(o.style.display="none"),updateProgressSteps(0),disableFormClicks(),setEmployerCookie(""),localStorage.removeItem("ihf_employer_name");const s=document.getElementById("heroTile"),l=document.getElementById("donationTiles");s&&(s.innerHTML=""),l&&(l.innerHTML="")}toggleInstructions(t)});let storedName=getEmployerCookie()||localStorage.getItem("ihf_employer_name")||"";const employerInput=document.getElementById("employerInput"),employerNameElement=document.getElementById("employerName");if(storedName&&storedName.trim()){updateEmployerDisplay(storedName,!1),employerInput.value=storedName;const e=document.querySelector(".steps-container"),t=document.getElementById("inputGroup"),n=document.getElementById("editLink"),o=document.getElementById("formInstruction");e&&(e.style.display="none"),t&&(t.style.display="none"),n&&(n.style.display="inline"),o&&(o.style.display="block");renderTiles(employerList.some(e=>storedName.toLowerCase().includes(e.toLowerCase()))?"vpf":"ihf"),enableFormClicks()}else{updateEmployerDisplay("Please enter your Employer name. Enter NA if not applicable.",!0),employerInput.value="";const e=document.querySelector(".steps-container"),t=document.getElementById("inputGroup"),n=document.getElementById("editLink"),o=document.getElementById("formInstruction");e&&(e.style.display="flex"),t&&(t.style.display="flex"),n&&(n.style.display="none"),o&&(o.style.display="none"),updateProgressSteps(0),disableFormClicks()}toggleInstructions(storedName),inputGroup&&"none"!==inputGroup.style.display&&employerInput.focus();